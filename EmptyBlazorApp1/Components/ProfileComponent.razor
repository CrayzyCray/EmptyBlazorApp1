@using MudBlazor
@using EmptyBlazorApp1.Entities
@using EmptyBlazorApp1.Services

@inject AccountService AccountService
@inject IJSRuntime JS

<MudPaper Class="pa-4 ma-2">
    <MudText>ФИО: @_userProfile?.Name</MudText>
    <MudText>Дата рождения: @_userProfile?.Birthday</MudText>
    <MudText>ВУЗ: @_userProfile?.University</MudText>
    <MudText>Курс: @_userProfile?.Course</MudText>
    <MudText>Группа: @_userProfile?.Group</MudText>
    <MudText>Телефон: @_userProfile?.PhoneNumber</MudText>
    <MudText>ВК: @_userProfile?.SocialNetworkLink</MudText>
    <MudText>Почта: @_userProfile?.Email</MudText>
    <MudIconButton Icon="@Icons.Material.Filled.Edit"  Color="Color.Primary" />
</MudPaper>

<MudPaper Class="pa-4 ma-2">
    <MudButton OnClick="LogoutButtonOnClick" FullWidth="true" Variant="Variant.Filled" Color="Color.Primary">Выйти из аккаунта</MudButton>
</MudPaper>

@code {
    User? _user;
    UserProfile? _userProfile;

    protected override void OnInitialized() {
        base.OnInitialized();
        _user = AccountService.GetUserWithProfile();
        _userProfile = _user?.UserProfile;
    }
    
    async Task LogoutButtonOnClick() {
        await JS.InvokeVoidAsync("deleteCookie", AccountService.SessionIdCode);
        await JS.InvokeVoidAsync("reloadPage");
    }
}
