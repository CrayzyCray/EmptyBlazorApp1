@using MudBlazor
@using EmptyBlazorApp1.Components.Misc
@using EmptyBlazorApp1.Entities
@using EmptyBlazorApp1.Services

@inject AccountService AccountService

<MudStack Spacing="2">
    <MudText Typo="Typo.h5" Align="Align.Center">Сообщества</MudText>
    <MudDivider/>
    @foreach (var com in _communities) {
    <СommunityCard 
        Title="@com.Title"
        Rating="@com.Description"
        Subscribers="0"/>
    }
</MudStack>

@code {
    List<Community> _communities = new List<Community>();

    protected override void OnInitialized() {
        base.OnInitialized();
        var user = AccountService.User;
        if (user != null) {
            _communities = AccountService.GetCommunities(user);
        }
    }

}
